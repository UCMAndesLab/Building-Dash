<!DOCTYPE html>
<html>
<head>
	<title>testView</title>
		<script src="http://canvasjs.com/assets/script/canvasjs.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

		<script type="text/javascript">
			function displayChart(){
				var readData = {{.ReadData}}; 


				var path = {{.Path}};

				var title = path; 

				var uuid = readData.uuid; 

				var series1 = {
					type: "spline",
					name: "Values",
					showInLegend: true,
					markerType: "none"
				}; 

				var chart = new CanvasJS.Chart("chart"); 

				chart.options.animationEnabled = true; 
				chart.options.title = {text: title}; 

				chart.options.axisX = {
					valueFormatString: "hh-TT-K",
					title: "time",
					intervalType: "minute",
					interval: 1
				}; 

				chart.options.axisY = {valueFormatString: "##.##0"}; 
				chart.options.data = []; 
				chart.options.data.push(series1); 

				testData = readData.Readings; 

				var dp = []; 

				series1.dataPoints = []; 

				for(i = 0; i < testData.length; ++i){
					dp.push({x: new Date(testData[i].Time), y: testData[i].Value});
				}

				series1.dataPoints = series1.dataPoints.concat(dp); 

				chart.render(); 

				var series2 = {
					type: "spline",
					name: "Values",
					showInLegend: true,
					markerType: "none"
				}; 

				var chart2 = new CanvasJS.Chart("chart2"); 

				chart2.options.animationEnabled = true; 

				chart2.options.title = {text: title}; 
				chart2.options.axisX = {
					valueFormatString: "hh-TT-K",
					title: "time",
					intervalType: "minute",
					interval: 1
				}; 

				chart2.options.data =[]; 

				chart2.options.data.push(series2); 

				var dp2 =[]; 

				series2.dataPoints = []; 

				for(j = 0; j < testData.length; ++j){
					dp2.push({x: new Date(testData[j].Time), y: testData[j].Value + 100.0}); 
				}

				series2.dataPoints = series2.dataPoints.concat(dp2); 

				chart2.render();



			}
			window.onclick = displayChart; 
			function toggleNavPanel(x){
				var panel = document.getElementById(x), navarrow = document.getElementById("navarrow"), maxH = "300px"; 

				if(panel.style.height == maxH){
					panel.style.height = "0px"; 
					navarrow.innerHTML = "&#9662;"; 
				}else{
					panel.style.height = maxH; 
					navarrow.innerHTML = " &#9652;"; 

				}
			}
			function postYourAdd(x){
				var iframe = document.getElementById(x), maxH = "300px";
				var uuid = {{.UUid}};
				var path = uuid; 
				 
				path = "/display/" + uuid; 
				
				iframe.src = path;

				iframe.style.display="inline-block";  
				if(iframe.style.height == maxH){
					iframe.style.visibility="hidden";
					iframe.style.width="0px"
					iframe.style.height="0px"; 
				}else{
					iframe.style.visibility="visible"; 
					iframe.style.height = "300px"; 
					iframe.style.width = "100%"; 
				}
				
				
			}
		function hideDisplay(x){
			var iframe = document.getElementById(x);

			iframe.style.visibility="hidden";  
			iframe.style.height = "0px";
			iframe.style.width = "0px"; 

		}

		
		</script>
		<style type="text/css">
			div#topbar{
				background:-webkit-linear-gradient(#666, #000);
				background:linear-gradient(#666, #000);
				height:80px;
			}
			div#topbar > #logo{
				float:left;
				width:140px;
				height:35px;
				margin:0px 0px 0px 0px;
				font-size: 36px;
				color:#999;
			}
			div#topbar > #sections_btn_holder{
				float:right;
				width:144px;
				height:46px;
				padding-top:16px;
			}
			div#topbar > #sections_btn_holder > button{ background:#F90;}
			div#topbar > #sections_panel{
				position:absolute;
				height:0px;
				width:550px;
				background:#000;
				top:60px;
				left:160px;
				border-radius:0px 0px 8px 8px;
				overflow:hidden;
				z-index:10000;
				transition: height 0.3s linear 0s;
			}
			div#topbar > #sections_panel > div{
				background:#333;
				padding:20px;
				height:238px;
				margin:10px;
				color:#FC0;
			}
			table{

				margin: 10px;

			}
			table, td{

				border-spacing: 5px; 
				background:  #12a3a7; 
				
				border-color: #12a3a7; border-collapse: collapse;
				border: 1px solid black;
				 
				float: left; 
			}
			td{
				padding: 5px; 
			}
		
			
			
		</style>
</head>
<body>
	

	<div id="topbar">
		<div id="logo">Building Dash</div>
		<div id="sections_btn_holder">
	 		<button onclick="toggleNavPanel('sections_panel')">Navigator <span id="navarrow">&#9662;</span></button>
		</div>
		<div id="sections_panel">
			<div>
	      		<form action="/query/" method="GET">
	      			<input type="submit" value="Search">
	      			
	      		</form>
	    	</div>
		</div>
	</div>

	
	
	
	<table>
		<tr>
			<td><p>{{.Path}}</p></td>
			<td><p>{{.UUid}}</p></td>
			
			<td>

				<form action="/display/{{.UUid}}" method="GET" target="{{.UUid}}">
				<input style="height: 51px;" type="submit" value="Display" onclick="postYourAdd('{{.UUid}}')">

				</form>
			</td>
		</tr>
	</table>
	
	<iframe name="{{.UUid}}" id="{{.UUid}}" height="0px" width="0px" style="visibility:hidden;" onmouseout="hideDisplay('{{.UUid}}')"></iframe>


</html>