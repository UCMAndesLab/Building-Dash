<html>
	<head>
		<title>results</title>
			<script src="http://canvasjs.com/assets/script/canvasjs.min.js"></script>
			<script type="text/javascript">

			window.onload = function () {
		
				var readData = {{.ReadData}};
			  
				var title = {{.Title}}

				for(i = 0; i < readData.length; i++){
					var series1 = {
						type: "spline",
						name: "Values",
						showInLegend: true,
						markerType: "none"
					};
					
					var uuid = readData[i].uuid
					var chart = new CanvasJS.Chart(uuid);
					//alert(readData[i].Readings);
					chart.options.animationEnabled = true; 
					chart.options.title = {text: title}; 
					chart.options.axisX = {
						valueFormatString: "hh-TT-K",
						title: "time",
						intervalType: "minute",
						interval: 1
					}; 
					chart.options.axisY = {valueFormatString: "##.##0"};
					chart.options.data = []; 
					chart.options.data.push(series1); 

					testData = readData[i].Readings; 
					var dp = []; 
					series1.dataPoints = []; 
					for(j = 0; j < testData.length; j++){
						//alert(testData[i].Value)
						//alert(testData[j].Value);
						dp.push({x: new Date(testData[j].Time), y: testData[j].Value}); 
					}
					
					series1.dataPoints = series1.dataPoints.concat(dp);

					chart.render(); 
				
				}
				
			
				
			}
			</script>
	</head>
	<body>
		<h1>{{.Title}}</h1>
		<p>[<a href="/query/">Search</a>]</p>

		{{range .ReadData}}
			<div id={{.Uuid}} style="height: 300px; width: 100%"></div>
		{{end}}
	</body>
</html>

